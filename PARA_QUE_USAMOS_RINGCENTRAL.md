# ğŸ“± Â¿Para QuÃ© Usamos RingCentral en TrustTax?

RingCentral es nuestra plataforma de **mensajerÃ­a SMS** que nos permite comunicarnos directamente con nuestros clientes a travÃ©s de mensajes de texto.

---

## ğŸ¯ Objetivo Principal

**Comunicarnos de forma inmediata y directa con los clientes** para mantenerlos informados sobre el estado de sus servicios de preparaciÃ³n de impuestos, recordatorios importantes y alertas de seguridad.

---

## ğŸ“‹ Casos de Uso Implementados

### 1. ğŸ“¦ **Actualizaciones de Estado de Pedidos**

**Â¿QuÃ© es?**
Notificamos a los clientes cuando el estado de su pedido cambia (por ejemplo: "En RevisiÃ³n", "Completado", "Requiere InformaciÃ³n").

**Ejemplo de mensaje:**

```
Tu pedido #12345 ha sido actualizado a: En RevisiÃ³n.
Revisa tu panel para mÃ¡s detalles.
Responde STOP para darte de baja.
```

**CuÃ¡ndo se envÃ­a:**

- Cuando un preparador cambia el estado de un pedido
- Cuando se completa una revisiÃ³n
- Cuando se requiere informaciÃ³n adicional del cliente

**Beneficio:**

- Los clientes se enteran inmediatamente sin tener que revisar la app
- Reduce la ansiedad del cliente esperando actualizaciones
- Mejora la satisfacciÃ³n del cliente

---

### 2. ğŸ“… **Recordatorios de Citas y Confirmaciones**

**Â¿QuÃ© es?**
Enviamos recordatorios cuando un cliente tiene una cita programada (consulta, revisiÃ³n de documentos, etc.).

**Ejemplo de mensaje:**

```
Recordatorio: Tienes una cita de consulta el
lunes, 15 de febrero de 2026 a las 2:00 PM.
Responde STOP para darte de baja.
```

**CuÃ¡ndo se envÃ­a:**

- 24 horas antes de una cita programada
- ConfirmaciÃ³n inmediata cuando se programa una cita
- Recordatorio el dÃ­a de la cita

**Beneficio:**

- Reduce las citas perdidas (no-shows)
- Mejora la organizaciÃ³n del cliente
- Aumenta la eficiencia del equipo

---

### 3. â° **Recordatorios de Fechas LÃ­mite de Impuestos**

**Â¿QuÃ© es?**
Alertamos a los clientes sobre fechas lÃ­mite importantes del IRS (fecha de presentaciÃ³n, extensiones, etc.).

**Ejemplo de mensaje:**

```
âš ï¸ Recordatorio Importante: La fecha lÃ­mite para
presentar tus impuestos es el 15 de abril de 2026.
AsegÃºrate de tener todos tus documentos listos.
Responde STOP para darte de baja.
```

**CuÃ¡ndo se envÃ­a:**

- 30 dÃ­as antes de la fecha lÃ­mite
- 7 dÃ­as antes de la fecha lÃ­mite
- El dÃ­a de la fecha lÃ­mite (si aÃºn no se ha presentado)

**Beneficio:**

- Evita multas por presentaciÃ³n tardÃ­a
- Ayuda a los clientes a planificar
- Mejora la tasa de cumplimiento

---

### 4. ğŸ“„ **Confirmaciones de Carga de Documentos**

**Â¿QuÃ© es?**
Confirmamos cuando un cliente sube documentos importantes (W-2, 1099, etc.).

**Ejemplo de mensaje:**

```
âœ… ConfirmaciÃ³n: Hemos recibido tu documento W-2.
Nuestro equipo lo revisarÃ¡ pronto.
Responde STOP para darte de baja.
```

**CuÃ¡ndo se envÃ­a:**

- Inmediatamente despuÃ©s de que un cliente sube un documento
- Cuando se completa la carga de todos los documentos requeridos

**Beneficio:**

- Tranquiliza al cliente que sus documentos fueron recibidos
- Reduce consultas de soporte ("Â¿recibieron mi documento?")
- Mejora la confianza del cliente

---

### 5. ğŸ”’ **Alertas de Seguridad**

**Â¿QuÃ© es?**
Notificamos al cliente sobre actividad sospechosa en su cuenta (intentos de login, cambios de contraseÃ±a, etc.).

**Ejemplo de mensaje:**

```
ğŸ”’ Alerta de Seguridad: Se detectÃ³ un intento de
inicio de sesiÃ³n desde una nueva ubicaciÃ³n.
Si no fuiste tÃº, contÃ¡ctanos inmediatamente.
Responde STOP para darte de baja.
```

**CuÃ¡ndo se envÃ­a:**

- Intentos de login desde nuevas ubicaciones/dispositivos
- Cambios de contraseÃ±a
- Cambios en informaciÃ³n sensible (SSN, direcciÃ³n, etc.)
- Actividad sospechosa detectada

**Beneficio:**

- Protege las cuentas de los clientes
- Detecta fraudes tempranamente
- Cumple con estÃ¡ndares de seguridad

---

### 6. ğŸ’¬ **Respuestas de Soporte al Cliente**

**Â¿QuÃ© es?**
Notificamos cuando el equipo de soporte responde a una consulta o pregunta del cliente.

**Ejemplo de mensaje:**

```
ğŸ’¬ Tienes una nueva respuesta de nuestro equipo
de soporte. Revisa tu chat para ver la respuesta.
Responde STOP para darte de baja.
```

**CuÃ¡ndo se envÃ­a:**

- Cuando un admin/preparador responde a un mensaje del cliente
- Cuando se resuelve una consulta
- Cuando se necesita informaciÃ³n adicional del cliente

**Beneficio:**

- Los clientes saben inmediatamente cuando hay una respuesta
- Reduce el tiempo de respuesta percibido
- Mejora la experiencia del cliente

---

### 7. ğŸ‰ **Mensajes Promocionales (Opcional)**

**Â¿QuÃ© es?**
Mensajes promocionales sobre nuevos servicios, ofertas especiales, etc. (solo si el cliente se inscribe por separado).

**Ejemplo de mensaje:**

```
ğŸ‰ Oferta Especial: Ahorra 20% en servicios de
inmigraciÃ³n este mes. VÃ¡lido hasta el 28 de febrero.
Responde STOP para darte de baja.
```

**CuÃ¡ndo se envÃ­a:**

- Solo si el cliente se inscribe especÃ­ficamente para promociones
- MÃ¡ximo 4 veces al mes
- Ofertas especiales y nuevos servicios

**Beneficio:**

- Aumenta las ventas de servicios adicionales
- Mantiene a los clientes informados sobre nuevos servicios
- Genera ingresos adicionales

---

## ğŸ”„ Flujo de Trabajo

### 1. **Opt-In del Cliente**

```
Cliente â†’ PÃ¡gina de Consentimiento SMS â†’ Ingresa nÃºmero â†’
Confirma consentimiento â†’ Recibe SMS de confirmaciÃ³n
```

### 2. **EnvÃ­o AutomÃ¡tico de Notificaciones**

```
Evento en el sistema (cambio de estado, nueva respuesta, etc.) â†’
Verifica consentimiento del cliente â†’
EnvÃ­a SMS automÃ¡ticamente â†’
Registra en base de datos
```

### 3. **Opt-Out del Cliente**

```
Cliente responde "STOP" â†’
Sistema actualiza consentimiento â†’
No se envÃ­an mÃ¡s SMS (excepto confirmaciÃ³n de opt-out)
```

---

## ğŸ’¡ Ventajas de Usar SMS vs. Solo Email

| CaracterÃ­stica         | Email                 | SMS                             |
| ---------------------- | --------------------- | ------------------------------- |
| **Tiempo de lectura**  | Horas/dÃ­as            | Minutos                         |
| **Tasa de apertura**   | ~20%                  | ~98%                            |
| **Urgencia percibida** | Baja                  | Alta                            |
| **Accesibilidad**      | Requiere internet/app | Funciona en cualquier telÃ©fono  |
| **Ideal para**         | InformaciÃ³n detallada | Alertas urgentes, recordatorios |

---

## ğŸ¯ Beneficios para TrustTax

### Para los Clientes

- âœ… **InformaciÃ³n inmediata** - Se enteran al instante de cambios importantes
- âœ… **Conveniencia** - No necesitan revisar la app constantemente
- âœ… **Tranquilidad** - Saben que sus documentos fueron recibidos
- âœ… **Seguridad** - Alertas inmediatas de actividad sospechosa
- âœ… **Control** - Pueden darse de baja fÃ¡cilmente (respondiendo "STOP")

### Para TrustTax

- âœ… **Mejor comunicaciÃ³n** - Llegamos directamente al cliente
- âœ… **Menos consultas de soporte** - Los clientes estÃ¡n mÃ¡s informados
- âœ… **Mayor satisfacciÃ³n** - Clientes mÃ¡s contentos = mejores reseÃ±as
- âœ… **Cumplimiento legal** - Tenemos consentimiento explÃ­cito documentado
- âœ… **AutomatizaciÃ³n** - No requiere intervenciÃ³n manual para enviar notificaciones

---

## ğŸ“Š Ejemplos de IntegraciÃ³n en el CÃ³digo

### Cuando cambia el estado de un pedido

```typescript
// En orders.service.ts
async updateOrderStatus(orderId: string, status: string) {
  // ... actualizar estado ...

  // Enviar SMS automÃ¡ticamente
  await this.smsService.sendOrderStatusUpdate(
    order.userId,
    orderId,
    status
  );
}
```

### Cuando un cliente sube un documento

```typescript
// En documents.service.ts
async uploadDocument(userId: string, file: File) {
  // ... subir documento ...

  // Enviar confirmaciÃ³n SMS
  await this.smsService.sendSMS(
    user.phone,
    `âœ… ConfirmaciÃ³n: Hemos recibido tu documento ${file.name}.`,
    userId
  );
}
```

### Cuando hay una respuesta de soporte

```typescript
// En chat.service.ts
async sendMessage(conversationId: string, content: string) {
  // ... enviar mensaje ...

  // Si es respuesta de admin, notificar al cliente por SMS
  if (senderRole === 'ADMIN' && client.smsConsent) {
    await this.smsService.sendSMS(
      client.phone,
      'ğŸ’¬ Tienes una nueva respuesta de nuestro equipo de soporte.',
      client.id
    );
  }
}
```

---

## ğŸ” Cumplimiento Legal

### âœ… TCPA (Telephone Consumer Protection Act)

- âœ… Consentimiento explÃ­cito requerido (opt-in)
- âœ… OpciÃ³n de opt-out fÃ¡cil ("STOP")
- âœ… IdentificaciÃ³n del remitente en cada mensaje
- âœ… PolÃ­tica de consentimiento SMS documentada

### âœ… CAN-SPAM

- âœ… Solo mensajes transaccionales (no spam)
- âœ… Mensajes promocionales solo con consentimiento separado
- âœ… InformaciÃ³n de contacto en cada mensaje

---

## ğŸ“ˆ MÃ©tricas que Podemos Rastrear

- **Tasa de opt-in**: % de clientes que se inscriben
- **Tasa de entrega**: % de SMS entregados exitosamente
- **Tasa de lectura**: % de SMS leÃ­dos (estimado)
- **Tasa de opt-out**: % de clientes que se dan de baja
- **Mensajes enviados por tipo**: EstadÃ­sticas por categorÃ­a

---

## ğŸš€ PrÃ³ximos Pasos

1. **Configurar RingCentral** (ver `RINGCENTRAL_SETUP.md`)
2. **Integrar en flujos existentes**:
   - Actualizaciones de pedidos
   - Carga de documentos
   - Respuestas de chat
   - Cambios de seguridad
3. **Monitorear mÃ©tricas**:
   - Tasa de opt-in
   - Tasa de entrega
   - SatisfacciÃ³n del cliente
4. **Expandir casos de uso**:
   - Recordatorios de fechas lÃ­mite
   - Confirmaciones de citas
   - Alertas de seguridad avanzadas

---

## â“ Preguntas Frecuentes

### Â¿Los clientes pueden darse de baja?

SÃ­, pueden responder "STOP" a cualquier mensaje o desactivar el consentimiento en su configuraciÃ³n.

### Â¿CuÃ¡nto cuesta?

RingCentral tiene planes flexibles. El sandbox es gratuito para desarrollo. En producciÃ³n, los costos dependen del volumen de mensajes.

### Â¿Funciona internacionalmente?

SÃ­, RingCentral soporta nÃºmeros internacionales. El formato E.164 se normaliza automÃ¡ticamente.

### Â¿QuÃ© pasa si un cliente no tiene SMS habilitado?

El sistema verifica el consentimiento antes de enviar. Si no hay consentimiento, simplemente no se envÃ­a el SMS (no hay error).

### Â¿Podemos personalizar los mensajes?

SÃ­, todos los mensajes son personalizables en el cÃ³digo. Puedes ajustar el contenido segÃºn tus necesidades.

---

## ğŸ“š Recursos

- **GuÃ­a de ConfiguraciÃ³n**: `RINGCENTRAL_SETUP.md`
- **DocumentaciÃ³n del Servicio**: `apps/api/src/sms/README.md`
- **PolÃ­tica de Consentimiento SMS**: `/legal/sms-consent` (en la app)
- **RingCentral Developer Portal**: <https://developer.ringcentral.com/>

---

**En resumen**: RingCentral nos permite **comunicarnos de forma inmediata, directa y efectiva** con nuestros clientes, mejorando su experiencia y nuestra eficiencia operativa. ğŸš€
